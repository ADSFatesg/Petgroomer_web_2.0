<div class="user-container">
<h3>Editar Cliente</h3>

<form [formGroup]="userForm" (ngSubmit)="save()">
  <!-- Agrupa as seções em um contêiner flexbox -->
  <div class="sections">

    <!-- Seção 1: Informações Pessoais -->
    <div class="section personal-info">
      <h3>Informações Pessoais</h3>

      <!-- Campo Nome -->
      <div class="form-group">
        <label for="name">Nome</label>
        <div class="input-with-icon">
          <mat-icon class="leading-icon">person</mat-icon>
          <input id="name" formControlName="name" type="text" placeholder="Nome completo">
        </div>
        <div *ngIf="userForm.get('name')?.touched && userForm.get('name')?.invalid" class="error-message">
          Nome é obrigatório.
        </div>
      </div>

      <!-- Campo Telefone -->
      <div class="form-group">
        <label for="phone">Telefone</label>
        <div class="input-with-icon">
          <mat-icon class="leading-icon">phone</mat-icon>
          <input id="phone" formControlName="phone" type="text" placeholder="Telefone" mask="(00) 00000-0000">
        </div>
        <div *ngIf="userForm.get('phone')?.touched && userForm.get('phone')?.invalid" class="error-message">
          Telefone é obrigatório.
        </div>
      </div>

      <!-- Campo CPF (desabilitado) -->
      <div class="form-group">
        <label for="cpf">CPF</label>
        <div class="input-with-icon">
          <mat-icon class="leading-icon">badge</mat-icon>
          <input id="cpf" formControlName="cpf" type="text" placeholder="CPF" isdisabled mask="000.000.000-00">
        </div>
      </div>
    </div>

    <!-- Seção 2: Endereço -->
    <div class="section address-info">
      <h3>Endereço</h3>

      <!-- Campo CEP com botão de consulta -->
      <div class="form-group">
        <label for="postalCode">CEP</label>
        <div class="input-with-icon">
          <mat-icon class="leading-icon">location_on</mat-icon>
          <input id="postalCode" formControlName="postalCode" type="text" placeholder="CEP" mask="00000-000">
          <button type="button" class="btn-icon" (click)="consultarCEP()">
            <mat-icon>search</mat-icon>
          </button>
        </div>
        <div *ngIf="userForm.get('postalCode')?.touched && userForm.get('postalCode')?.invalid"
             class="error-message">
          CEP é obrigatório.
        </div>
      </div>

      <!-- Campo Rua -->
      <div class="form-group">
        <label for="street">Rua</label>
        <div class="input-with-icon">
          <mat-icon class="leading-icon">home</mat-icon>
          <input id="street" formControlName="street" type="text" placeholder="Rua">
        </div>
      </div>

      <!-- Campo Número -->
      <div class="form-group">
        <label for="number">Número</label>
        <div class="input-with-icon">
          <mat-icon class="leading-icon">looks_one</mat-icon>
          <input id="number" formControlName="number" type="text" placeholder="Número">
        </div>
      </div>

      <!-- Campo Complemento -->
      <div class="form-group">
        <label for="complement">Complemento</label>
        <div class="input-with-icon">
          <mat-icon class="leading-icon">add_location</mat-icon>
          <input id="complement" formControlName="complement" type="text" placeholder="Complemento">
        </div>
      </div>

      <!-- Campo Cidade -->
      <div class="form-group">
        <label for="city">Cidade</label>
        <div class="input-with-icon">
          <mat-icon class="leading-icon">location_city</mat-icon>
          <input id="city" formControlName="city" type="text" placeholder="Cidade">
        </div>
      </div>

      <!-- Campo Estado -->
      <div class="form-group">
        <label for="state">Estado</label>
        <div class="input-with-icon">
          <mat-icon class="leading-icon">map</mat-icon>
          <input id="state" formControlName="state" type="text" placeholder="Estado">
        </div>
      </div>

      <!-- Campo País com ícone e select nativo -->
      <div class="form-group">
        <label for="country">País</label>
        <div class="input-with-icon">
          <mat-icon class="leading-icon">language</mat-icon>
          <select id="country" formControlName="country">
            <option *ngFor="let country of countries" [value]="country">{{ country }}</option>
          </select>
        </div>
      </div>
    </div>
  </div>

  <!-- Botão de Atualizar -->
  <button type="submit" class="btn-save" [disabled]="loading">
    <span *ngIf="loading" class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
    {{ loading ? 'Salvando...' : 'Atualizar Dados' }}
  </button>
</form>
</div>
